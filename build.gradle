
repositories {
    mavenCentral()
}

group = projectGroup
version = projectVersion

apply plugin: 'java'

dependencies {
    compile group: 'io.vertx', name: 'vertx-core', version: '3.4.1'
    compile group: 'io.vertx', name: 'vertx-core', version: '3.4.1', classifier: 'tests'
    compile group: 'io.vertx', name: 'vertx-hazelcast', version: '3.4.1'
    compile group: 'io.vertx', name: 'vertx-web', version: '3.4.1'

    compile 'log4j:log4j:1.2.17'
    compile 'org.slf4j:slf4j-api:1.7.21'
    compile 'org.slf4j:slf4j-log4j12:1.7.14'

    testCompile 'io.netty:netty-codec-http:4.0.36.Final'
    testCompile 'junit:junit:4.12'
    testCompile 'org.apache.httpcomponents:httpclient:4.5.2'
    testCompile group: 'io.vertx', name: 'vertx-unit', version: '3.4.1'
}

test.doFirst {

    jvmArgs += [
            "-Dvertx.logger-delegate-factory-class-name=io.vertx.core.logging.Log4jLogDelegateFactory"
    ]

    if (file(rootProject.getRootDir().getAbsolutePath() + "/log4j.properties").exists()) {

        jvmArgs += ["-Dlog4j.configuration=file:" + rootProject.getRootDir().getAbsolutePath() + "/log4j.properties"]
    }
}
